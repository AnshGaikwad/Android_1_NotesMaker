Index: app/src/main/AndroidManifest.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.notesmaker\">\r\n\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.INTERNET\"/>\r\n\r\n    <uses-feature\r\n        android:name=\"android.hardware.camera\"\r\n        android:required=\"true\" />\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:requestLegacyExternalStorage=\"true\"\r\n        android:roundIcon=\"@mipmap/ic_launcher_round\"\r\n        android:supportsRtl=\"true\"\r\n        android:theme=\"@style/AppTheme\">\r\n        <activity android:name=\".CloudNotes\"/>\r\n        <activity\r\n            android:name=\".HomeActivity\"\r\n            android:theme=\"@style/Theme.AppCompat.Light.NoActionBar\" />\r\n        <activity android:name=\".Register\" />\r\n        <activity android:name=\".PdfActivity\" />\r\n        <activity\r\n            android:name=\".MainActivity\"\r\n            tools:ignore=\"Instantiatable\" />\r\n        <activity\r\n            android:name=\".NotesActivity\"\r\n            android:theme=\"@style/Theme.AppCompat.Light.NoActionBar\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity android:name=\"com.theartofdev.edmodo.cropper.CropImageActivity\"\r\n            android:theme=\"@style/Base.Theme.AppCompat\"/>\r\n        <activity\r\n            android:name=\"com.yalantis.ucrop.UCropActivity\"\r\n            android:screenOrientation=\"portrait\"\r\n            android:theme=\"@style/Theme.AppCompat.Light.NoActionBar\"/>\r\n\r\n        <provider\r\n            android:name=\"androidx.core.content.FileProvider\"\r\n            android:authorities=\"${applicationId}.provider\"\r\n            android:exported=\"false\"\r\n            android:grantUriPermissions=\"true\">\r\n            <meta-data\r\n                android:name=\"android.support.FILE_PROVIDER_PATHS\"\r\n                android:resource=\"@xml/provider_paths\"/>\r\n        </provider>\r\n\r\n    </application>\r\n\r\n</manifest>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/AndroidManifest.xml	(revision d1059d569a3938914b4b9958b71ba39f20aeb237)
+++ app/src/main/AndroidManifest.xml	(date 1605419511911)
@@ -39,10 +39,6 @@
         </activity>
         <activity android:name="com.theartofdev.edmodo.cropper.CropImageActivity"
             android:theme="@style/Base.Theme.AppCompat"/>
-        <activity
-            android:name="com.yalantis.ucrop.UCropActivity"
-            android:screenOrientation="portrait"
-            android:theme="@style/Theme.AppCompat.Light.NoActionBar"/>
 
         <provider
             android:name="androidx.core.content.FileProvider"
Index: app/src/main/java/com/example/notesmaker/NotesActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.notesmaker;\r\n\r\nimport android.Manifest;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.BitmapFactory;\r\nimport android.net.Uri;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.os.Environment;\r\nimport android.provider.MediaStore;\r\nimport android.util.Log;\r\nimport android.view.Menu;\r\nimport android.view.MenuItem;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.ActionBarDrawerToggle;\r\nimport androidx.appcompat.app.AlertDialog;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.Toolbar;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.core.content.FileProvider;\r\nimport androidx.core.view.GravityCompat;\r\nimport androidx.drawerlayout.widget.DrawerLayout;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport com.getbase.floatingactionbutton.FloatingActionButton;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.material.navigation.NavigationView;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.ml.vision.FirebaseVision;\r\nimport com.google.firebase.ml.vision.common.FirebaseVisionImage;\r\nimport com.google.firebase.ml.vision.text.FirebaseVisionText;\r\nimport com.google.firebase.ml.vision.text.FirebaseVisionTextDetector;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.ml.quaterion.text2summary.Text2Summary;\r\n\r\nimport java.io.File;\r\nimport java.io.FileNotFoundException;\r\nimport java.io.InputStream;\r\nimport java.util.List;\r\n\r\nimport kotlin.jvm.internal.Ref.ObjectRef;\r\n\r\npublic class NotesActivity extends AppCompatActivity implements NavigationView.OnNavigationItemSelectedListener{\r\n\r\n    private static final int REQUEST_CODE_STORAGE_PERMISSION = 1;\r\n    private static final int REQUEST_CODE_SELECT_IMAGE = 1;\r\n    private static final int REQUEST_CODE_SELECT_DOC = 10;\r\n    static final int REQUEST_IMAGE_CAPTURE = 2;\r\n\r\n    private DrawerLayout drawer;\r\n\r\n    NavigationView navigationView;\r\n    RecyclerView PDFList;\r\n    PdfListAdapter pdfListAdapter;\r\n    LinearLayoutManager linearLayoutManager;\r\n    File[] allPdfList;\r\n\r\n    FirebaseAuth mAuth;\r\n    FirebaseUser mUser;\r\n    FirebaseStorage storage;\r\n    StorageReference userStorage;\r\n    StorageReference pdfStorage;\r\n\r\n    @Override\r\n    protected void onStart() {\r\n\r\n        checkAuthentication();\r\n        super.onStart();\r\n    }\r\n\r\n    private void checkAuthentication() {\r\n        Menu menu = navigationView.getMenu();\r\n\r\n        MenuItem login = menu.findItem(R.id.nav_logout);\r\n\r\n        FirebaseUser mFirebaseUser = mAuth.getCurrentUser();\r\n        if(mFirebaseUser==null)\r\n        {\r\n            login.setTitle(\"Log In\");\r\n            login.setIcon(getResources().getDrawable(R.drawable.login));\r\n        }\r\n        else\r\n        {\r\n            login.setTitle(\"Log Out\");\r\n            login.setIcon(getResources().getDrawable(R.drawable.logout));\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_notes);\r\n\r\n        mAuth = FirebaseAuth.getInstance();\r\n        mUser = mAuth.getCurrentUser();\r\n\r\n        if (mUser!=null){\r\n            storage = FirebaseStorage.getInstance();\r\n            userStorage = storage.getReference();\r\n            userStorage = userStorage.child(mUser.getUid());\r\n            pdfStorage = userStorage.child(\"PDFs\");\r\n        }\r\n\r\n        PDFList = findViewById(R.id.pdfList);\r\n        initRecyclerView();\r\n\r\n\r\n        Toolbar toolbar = findViewById(R.id.toolbar);\r\n        setSupportActionBar(toolbar);\r\n\r\n        drawer = findViewById(R.id.drawer_layout);\r\n        navigationView = findViewById(R.id.nav_view);\r\n\r\n\r\n\r\n        navigationView.setNavigationItemSelectedListener(this);\r\n\r\n\r\n        ActionBarDrawerToggle toggle = new ActionBarDrawerToggle(this, drawer, toolbar,\r\n                R.string.navigation_drawer_open, R.string.navigation_drawer_close);\r\n        drawer.addDrawerListener(toggle);\r\n        toggle.syncState();\r\n\r\n\r\n\r\n\r\n\r\n        FloatingActionButton camFab = findViewById(R.id.fab_cam);\r\n        camFab.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                // amey let ur code go here...\r\n                {\r\n                    Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\r\n                    if (takePictureIntent.resolveActivity(getPackageManager()) != null) {\r\n                        startActivityForResult(takePictureIntent, REQUEST_IMAGE_CAPTURE);\r\n                    }\r\n                }\r\n\r\n            }\r\n        });\r\n\r\n        FloatingActionButton imgFab = findViewById(R.id.fab_image);\r\n        imgFab.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n                if(ContextCompat.checkSelfPermission(getApplicationContext(), Manifest.permission.READ_EXTERNAL_STORAGE)!= PackageManager.PERMISSION_GRANTED){\r\n                    ActivityCompat.requestPermissions(\r\n                            NotesActivity.this,\r\n                            new String[]{Manifest.permission.READ_EXTERNAL_STORAGE},\r\n                            REQUEST_CODE_STORAGE_PERMISSION\r\n                    );\r\n                }\r\n                else\r\n                {\r\n                    selectImage();\r\n                }\r\n            }\r\n        });\r\n\r\n//        FloatingActionButton docFab = findViewById(R.id.fab_doc);\r\n//        docFab.setOnClickListener(new View.OnClickListener() {\r\n//            @Override\r\n//            public void onClick(View view) {\r\n//                Intent myFileIntent = new Intent(Intent.ACTION_GET_CONTENT);\r\n//                myFileIntent.setType(\"*/*\");\r\n//                startActivityForResult(myFileIntent, REQUEST_CODE_SELECT_DOC);\r\n//            }\r\n//        });\r\n    }\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        if (drawer.isDrawerOpen(GravityCompat.START)) {\r\n            drawer.closeDrawer(GravityCompat.START);\r\n        } else {\r\n            super.onBackPressed();\r\n        }\r\n    }\r\n\r\n    private void initRecyclerView() {\r\n        try {\r\n            String path = Environment.getExternalStorageDirectory().getAbsolutePath() + \"/MyPdf\";\r\n            File directory = new File(path);\r\n            File[] allFiles = directory.listFiles();\r\n\r\n\r\n            allPdfList = getPDFs(allFiles);\r\n            pdfListAdapter = new PdfListAdapter(NotesActivity.this, allPdfList);\r\n            linearLayoutManager = new LinearLayoutManager(this);\r\n\r\n            pdfListAdapter.setOnItemClickListener(new PdfListAdapter.OnItemClickListener() {\r\n                @Override\r\n                public void onItemClick(int position) {\r\n                    Intent intent = new Intent(NotesActivity.this, PdfActivity.class);\r\n                    // passing current pdf from here\r\n                    String pdfpath = allPdfList[position].getPath();\r\n\r\n\r\n                    Log.d(\"chk\", pdfpath);\r\n\r\n                    intent.putExtra(\"PdfPath\", pdfpath);\r\n                    startActivity(intent);\r\n                }\r\n            });\r\n\r\n            PDFList.setLayoutManager(linearLayoutManager);\r\n            PDFList.setAdapter(pdfListAdapter);\r\n        } catch (Exception e){\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    public void deleteNote(final int position) {\r\n        if(allPdfList[position].exists())\r\n        {\r\n            AlertDialog.Builder builder = new AlertDialog.Builder(NotesActivity.this);\r\n            builder.setMessage(\"Do you want to delete this Note?\")\r\n                    .setPositiveButton(\"Yes\", new DialogInterface.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(DialogInterface dialog, int which) {\r\n                            allPdfList[position].delete();\r\n//                            Toast.makeText(this, \"Deleted\", Toast.LENGTH_SHORT).show();\r\n                            initRecyclerView();\r\n                        }\r\n                    })\r\n                    .setNegativeButton(\"No\", null);\r\n            AlertDialog alertDialog = builder.create();\r\n            alertDialog.show();\r\n        }\r\n        else\r\n        {\r\n            Toast.makeText(this, \"ERROR\", Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    private File[] getPDFs(File[] allFiles) {\r\n        int i = 0;\r\n        File[] PDFs = new File[allFiles.length];\r\n        for(File f: allFiles){\r\n            if (f.isFile() && f.getPath().endsWith(\".pdf\")){\r\n                PDFs[i] = f;\r\n                i++;\r\n            }\r\n        }\r\n        return PDFs;\r\n    }\r\n\r\n    private void selectImage() {\r\n        Intent intent = new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI);\r\n        if(intent.resolveActivity(getPackageManager())!=null)\r\n        {\r\n            startActivityForResult(intent, REQUEST_CODE_SELECT_IMAGE);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n\r\n        if(requestCode == REQUEST_CODE_STORAGE_PERMISSION && grantResults.length>0)\r\n        {\r\n            selectImage();\r\n        }\r\n        else\r\n        {\r\n            Toast.makeText(this, \"Permission Denied!!!\", Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        if (requestCode == REQUEST_IMAGE_CAPTURE && resultCode == RESULT_OK) {\r\n            Bundle extras = data.getExtras();\r\n            Bitmap imageBitmap = (Bitmap) extras.get(\"data\");\r\n            getTextFromBitmap(imageBitmap);\r\n        }\r\n\r\n\r\n        if (requestCode == REQUEST_CODE_SELECT_IMAGE && resultCode == RESULT_OK) {\r\n            if (data != null) {\r\n\r\n                Uri selectedImageUri = data.getData();\r\n                if (selectedImageUri != null) {\r\n                    InputStream inputStream = null;\r\n                    try {\r\n                        inputStream = getContentResolver().openInputStream(selectedImageUri);\r\n                        Bitmap bitmap = BitmapFactory.decodeStream(inputStream);\r\n//                        varun u can get the bitmap from here for ocr...\r\n                        getTextFromBitmap(bitmap);\r\n\r\n                    } catch (FileNotFoundException e) {\r\n                        e.printStackTrace();\r\n                        Toast.makeText(this, \"Exception\" + e.getMessage(), Toast.LENGTH_SHORT).show();\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        if(requestCode == REQUEST_CODE_SELECT_DOC && resultCode == RESULT_OK){\r\n            // doc code will go here ...\r\n\r\n        }\r\n\r\n    }\r\n\r\n    private void getTextFromBitmap(Bitmap imageBitmap) {\r\n        //Enter your code from here Varun\r\n        FirebaseVisionImage image = FirebaseVisionImage.fromBitmap(imageBitmap);\r\n        FirebaseVisionTextDetector textDetector = FirebaseVision.getInstance().getVisionTextDetector();\r\n        textDetector.detectInImage(image).addOnSuccessListener(new OnSuccessListener<FirebaseVisionText>() {\r\n            @Override\r\n            public void onSuccess(FirebaseVisionText firebaseVisionText) {\r\n                displayTextFromImage(firebaseVisionText);\r\n            }\r\n        }).addOnFailureListener(new OnFailureListener() {\r\n            @Override\r\n            public void onFailure(@NonNull Exception e) {\r\n                Toast.makeText(NotesActivity.this, \"Error: \" + e.getMessage(), Toast.LENGTH_SHORT).show();\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    private void displayTextFromImage(FirebaseVisionText firebaseVisionText) {\r\n        List<FirebaseVisionText.Block> blockList = firebaseVisionText.getBlocks();\r\n        String text = \"\";\r\n        if(blockList.size() == 0){\r\n            Toast.makeText(this, \"No Text found in image\", Toast.LENGTH_SHORT).show();\r\n        }else{\r\n            for (FirebaseVisionText.Block block : firebaseVisionText.getBlocks()){\r\n                 text += block.getText() + \"\\n\";\r\n            }\r\n\r\n           // previewText(text);\r\n          //  Log.d(\"chk\", text);\r\n            //Use the text from here aditya\r\n\r\n            // Dialog box\r\n            // Initializing a dialog box\r\n            final android.app.AlertDialog.Builder builder = new android.app.AlertDialog.Builder(NotesActivity.this);\r\n            View mView = getLayoutInflater().inflate(R.layout.dialog, null);\r\n\r\n            // declaring edit text\\\r\n            final EditText namePdf = mView.findViewById(R.id.name_note);\r\n            final EditText editText = mView.findViewById(R.id.edit_text);\r\n            final Button button = mView.findViewById(R.id.button);\r\n            final Button button2 = mView.findViewById(R.id.button2);\r\n            // setting view\r\n            builder.setView(mView);\r\n//\r\n//            // prevents off screen touches\r\n            builder.setCancelable(false);\r\n\r\n            final String copiedText = text;\r\n            editText.setText(copiedText);\r\n\r\n            button.setOnClickListener(new View.OnClickListener() {\r\n                public void onClick(View v) {\r\n                    String finalText = summarizeText(copiedText);\r\n                    editText.setText(finalText);\r\n                }\r\n            });\r\n\r\n            button2.setOnClickListener(new View.OnClickListener() {\r\n                public void onClick(View v) {\r\n                    editText.setText(copiedText);\r\n                }\r\n            });\r\n\r\n            builder.setPositiveButton(\"Save as PDF\", new DialogInterface.OnClickListener() {\r\n                @Override\r\n                public void onClick(DialogInterface dialogInterface, int i) {\r\n                    String finalText = editText.getText().toString();\r\n                    String nameNote = namePdf.getText().toString();\r\n                    saveToPDF(finalText, nameNote);\r\n\r\n                }\r\n            });\r\n\r\n            // setting neg btn\r\n            builder.setNegativeButton(\"Discard\", null);\r\n\r\n            //show\r\n            builder.show();\r\n\r\n        }\r\n    }\r\n\r\n    private void saveToPDF(String text, String name) {\r\n        if (ContextCompat.checkSelfPermission(getApplicationContext(), Manifest.permission.WRITE_EXTERNAL_STORAGE) == PackageManager.PERMISSION_GRANTED){\r\n\r\n            if(text.isEmpty())\r\n            {\r\n                Toast.makeText(this, \"Nothing to save, Text is empty\", Toast.LENGTH_SHORT).show();\r\n            }\r\n            else {\r\n                String path = Environment.getExternalStorageDirectory().getAbsolutePath() + \"/MyPdf\";\r\n\r\n                PDF pdf = new PDF();\r\n                pdf.addParagraph(text);\r\n                File file = pdf.makeDocument(path, name);\r\n\r\n                if (mUser!=null){\r\n                    if (file != null){\r\n                        StorageReference tempFile = pdfStorage.child(file.getName());\r\n                        tempFile.putFile(Uri.fromFile(file));\r\n                        Log.i(\"Cloud\", \"Uploaded\");\r\n                    }\r\n                }\r\n\r\n\r\n                Toast.makeText(this, \"Note Saved as a PDF in \" + path, Toast.LENGTH_SHORT).show();\r\n\r\n                initRecyclerView();\r\n            }\r\n\r\n        } else if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {\r\n            if(shouldShowRequestPermissionRationale(Manifest.permission.WRITE_EXTERNAL_STORAGE)){\r\n                AlertDialog.Builder alert = new AlertDialog.Builder(this);\r\n                alert.setTitle(\"Storage Permission Needed\");\r\n                alert.setMessage(\"We need storage permission to store the PDF on your device. Please grant storage permission.\");\r\n                alert.setPositiveButton(\"Okay\", new DialogInterface.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(DialogInterface dialog, int which) {\r\n                        requestPermissions(new String[] {Manifest.permission.WRITE_EXTERNAL_STORAGE}, 01);\r\n                    }\r\n                });\r\n                alert.show();\r\n            } else {\r\n                requestPermissions(new String[] {Manifest.permission.WRITE_EXTERNAL_STORAGE}, 01);\r\n            }\r\n        }\r\n    }\r\n\r\n    private String summarizeText(String text) {\r\n        final ObjectRef summary = new ObjectRef();\r\n        summary.element = Text2Summary.Companion.summarize(text, 0.4F);\r\n        //  TV.setText((CharSequence)((String)summary.element));\r\n//        previewText((String)summary.element);\r\n        return (String)summary.element;\r\n    }\r\n\r\n    @Override\r\n    public boolean onNavigationItemSelected(@NonNull MenuItem menuItem) {\r\n        switch (menuItem.getItemId()) {\r\n            case R.id.nav_sync:\r\n                startActivity(new Intent(getApplicationContext(), CloudNotes.class));\r\n                Toast.makeText(this, \"Sync\", Toast.LENGTH_SHORT).show();\r\n                break;\r\n            case R.id.nav_settings:\r\n                Toast.makeText(this, \"Settings\", Toast.LENGTH_SHORT).show();\r\n                break;\r\n            case R.id.nav_logout:\r\n                if(menuItem.getTitle()==\"Log Out\")\r\n                {\r\n                    mAuth.signOut();\r\n                    checkAuthentication();\r\n                }\r\n                else\r\n                {\r\n                    startActivity(new Intent(getApplicationContext(), MainActivity.class));\r\n                }\r\n                break;\r\n            case R.id.nav_read:\r\n                Toast.makeText(this, \"Read\", Toast.LENGTH_SHORT).show();\r\n                break;\r\n            case R.id.nav_contact:\r\n                Toast.makeText(this, \"Contact\", Toast.LENGTH_SHORT).show();\r\n                break;\r\n        }\r\n        drawer.closeDrawer(GravityCompat.START);\r\n        return true;\r\n    }\r\n\r\n    public void renameNote(final int adapterPosition) {\r\n\r\n\r\n\r\n        final android.app.AlertDialog.Builder builder = new android.app.AlertDialog.Builder(NotesActivity.this);\r\n        View mView = getLayoutInflater().inflate(R.layout.rename_dialog, null);\r\n\r\n        // declaring edit text\\\r\n        final TextView renText = mView.findViewById(R.id.rename_text);\r\n        final EditText renEdit = mView.findViewById(R.id.rename_edit);\r\n        // setting view\r\n        builder.setView(mView);\r\n\r\n            // prevents off screen touches\r\n        builder.setCancelable(false);\r\n\r\n        builder.setPositiveButton(\"Rename\", new DialogInterface.OnClickListener() {\r\n            @Override\r\n            public void onClick(DialogInterface dialogInterface, int i) {\r\n                String finalText = renEdit.getText().toString() + \".pdf\";\r\n                if(allPdfList[adapterPosition].exists())\r\n                {\r\n                    File from = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + \"/MyPdf\",allPdfList[adapterPosition].getName());\r\n                    File to = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + \"/MyPdf\",finalText);\r\n                    from.renameTo(to);\r\n                }\r\n                initRecyclerView();\r\n            }\r\n        });\r\n\r\n        // setting neg btn\r\n        builder.setNegativeButton(\"Cancel\", null);\r\n\r\n        //show\r\n        builder.show();\r\n\r\n\r\n    }\r\n\r\n    public void shareNote(int adapterPosition) {\r\n        Intent shareIntent = new Intent(Intent.ACTION_SEND);\r\n        shareIntent.setType(\"application/pdf\");\r\n        Uri uri = FileProvider.getUriForFile(NotesActivity.this, NotesActivity.this.getPackageName() + \".provider\", allPdfList[adapterPosition]);shareIntent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);\r\n        shareIntent.putExtra(Intent.EXTRA_STREAM, uri);\r\n        shareIntent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);\r\n        startActivity(Intent.createChooser(shareIntent, \"Share it\"));\r\n    }\r\n\r\n//   private void previewText(String string){\r\n//        textView.setText(string);\r\n//   }\r\n\r\n    public void uploadFile(){\r\n\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/notesmaker/NotesActivity.java	(revision d1059d569a3938914b4b9958b71ba39f20aeb237)
+++ app/src/main/java/com/example/notesmaker/NotesActivity.java	(date 1605419998068)
@@ -17,6 +17,7 @@
 import android.view.View;
 import android.widget.Button;
 import android.widget.EditText;
+import android.widget.ImageView;
 import android.widget.TextView;
 import android.widget.Toast;
 
@@ -63,6 +64,8 @@
     static final int REQUEST_IMAGE_CAPTURE = 2;
 
     private DrawerLayout drawer;
+    ImageView pfp; //Profile Photo
+    TextView username, userEmail;
 
     NavigationView navigationView;
     RecyclerView PDFList;
@@ -126,10 +129,16 @@
         drawer = findViewById(R.id.drawer_layout);
         navigationView = findViewById(R.id.nav_view);
 
+        View header = navigationView.getHeaderView(R.layout.nav_header);
+        pfp = header.findViewById(R.id.userProfilePhoto);
+        username = header.findViewById(R.id.username);
+        userEmail = header.findViewById(R.id.userEmail);
+
 
 
         navigationView.setNavigationItemSelectedListener(this);
 
+        if (mUser!=null){updateHeader()}
 
         ActionBarDrawerToggle toggle = new ActionBarDrawerToggle(this, drawer, toolbar,
                 R.string.navigation_drawer_open, R.string.navigation_drawer_close);
@@ -184,6 +193,15 @@
 //        });
     }
 
+    private void updateHeader() {
+        username.setText(mUser.getDisplayName());
+        userEmail.setText(mUser.getEmail());
+
+        if (mUser.getPhotoUrl()!=null){
+            
+        }
+    }
+
     @Override
     public void onBackPressed() {
         if (drawer.isDrawerOpen(GravityCompat.START)) {
Index: app/src/main/java/com/example/notesmaker/Register.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.notesmaker;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.app.Activity;\r\nimport android.content.ActivityNotFoundException;\r\nimport android.content.Intent;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.provider.MediaStore;\r\nimport android.text.TextUtils;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.Toast;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.android.gms.tasks.OnFailureListener;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.android.gms.tasks.Task;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.theartofdev.edmodo.cropper.CropImage;\r\nimport com.yalantis.ucrop.UCrop;\r\n\r\nimport java.io.File;\r\n\r\nimport de.hdodenhof.circleimageview.CircleImageView;\r\n\r\npublic class Register extends AppCompatActivity {\r\n    private static final int SELECT_PICTURE = 0;\r\n    public static final int PIC_CROP = 1;\r\n    EditText rCodeEnter, rEmailId, rPassword, rName;\r\n    CircleImageView profilePicture;\r\n    Uri pfp; //profile Picture\r\n    FirebaseAuth fAuth;\r\n    Button Next;\r\n    private static final String TAG = \"Register\";\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n\r\n        setContentView(R.layout.activity_register);\r\n        fAuth = FirebaseAuth.getInstance();\r\n        Next = findViewById(R.id.button_next);\r\n        rEmailId = findViewById(R.id.edit_text_emailId);\r\n        rPassword = findViewById(R.id.edit_text_password);\r\n        rName = findViewById(R.id.edit_text_name);\r\n        profilePicture = findViewById(R.id.profile_image);\r\n\r\n        profilePicture.setOnClickListener(new SelectImage());\r\n        pfp = null;\r\n\r\n\r\n        Next.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                String email = rEmailId.getText().toString().trim();\r\n                String password = rPassword.getText().toString().trim();\r\n                String name = rName.getText().toString().trim();\r\n                if (TextUtils.isEmpty(name)) {\r\n                    rName.setError(\"Name is mandatory\");\r\n                    return;\r\n                }\r\n                if (TextUtils.isEmpty(email)) {\r\n                    rEmailId.setError(\"Email Id is mandatory\");\r\n                    return;\r\n                }\r\n                if (TextUtils.isEmpty(password)) {\r\n                    rPassword.setError(\"Password is mandatory\");\r\n                    return;\r\n                }\r\n                if (password.length() < 6) {\r\n                    rPassword.setError(\"Password should be longer than 6 characters\");\r\n                    return;\r\n                }\r\n\r\n\r\n                fAuth.createUserWithEmailAndPassword(email, password).addOnCompleteListener(new OnCompleteListener<AuthResult>() {\r\n                    @Override\r\n                    public void onComplete(@NonNull Task<AuthResult> task) {\r\n                        if (task.isSuccessful()) {\r\n                            FirebaseUser user = fAuth.getCurrentUser();\r\n                            user.sendEmailVerification()\r\n                                    .addOnSuccessListener(new OnSuccessListener<Void>() {\r\n                                        @Override\r\n                                        public void onSuccess(Void aVoid) {\r\n                                            Toast.makeText(Register.this, \"Verification Message has been sent\", Toast.LENGTH_LONG).show();\r\n\r\n\r\n                                        }\r\n                                    }\r\n                            ).addOnFailureListener(new OnFailureListener() {\r\n                                @Override\r\n                                public void onFailure(@NonNull Exception e) {\r\n                                    Log.d(TAG, \"On Failure: Message not sent\" + e.getMessage());\r\n                                    Toast.makeText(Register.this, \"Verification Message not sent\", Toast.LENGTH_LONG).show();\r\n                                }\r\n                            });\r\n                            Toast.makeText(Register.this, \"User Created\", Toast.LENGTH_LONG).show();\r\n                            startActivity(new Intent(getApplicationContext(), MainActivity.class));\r\n                        } else {\r\n                            Toast.makeText(Register.this, \"Error!\" + task.getException().getMessage(), Toast.LENGTH_LONG).show();\r\n                        }\r\n                    }\r\n                });\r\n                startActivity(new Intent(getApplicationContext(), MainActivity.class));\r\n            }\r\n        });\r\n    }\r\n\r\n    public class SelectImage implements View.OnClickListener{\r\n        @Override\r\n        public void onClick(View v) {\r\n            Intent intent = new Intent();\r\n            intent.setType(\"image/*\");\r\n            intent.setAction(Intent.ACTION_GET_CONTENT);\r\n\r\n            startActivityForResult(Intent.createChooser(intent, \"Select Picture\"), SELECT_PICTURE);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (resultCode == Activity.RESULT_OK){\r\n            if (requestCode == SELECT_PICTURE){\r\n                Uri image = data.getData();\r\n\r\n                CropImage.activity(image)\r\n                        .start(this);\r\n            }\r\n\r\n\r\n            if (requestCode == CropImage.CROP_IMAGE_ACTIVITY_REQUEST_CODE) {\r\n                CropImage.ActivityResult result = CropImage.getActivityResult(data);\r\n                if (resultCode == RESULT_OK) {\r\n                    pfp = result.getUri();\r\n                    profilePicture.setImageURI(pfp);\r\n                } else if (resultCode == CropImage.CROP_IMAGE_ACTIVITY_RESULT_ERROR_CODE) {\r\n                    Exception error = result.getError();\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/notesmaker/Register.java	(revision d1059d569a3938914b4b9958b71ba39f20aeb237)
+++ app/src/main/java/com/example/notesmaker/Register.java	(date 1605419715996)
@@ -5,11 +5,9 @@
 import androidx.appcompat.app.AppCompatActivity;
 
 import android.app.Activity;
-import android.content.ActivityNotFoundException;
 import android.content.Intent;
 import android.net.Uri;
 import android.os.Bundle;
-import android.provider.MediaStore;
 import android.text.TextUtils;
 import android.util.Log;
 import android.view.View;
@@ -23,10 +21,8 @@
 import com.google.firebase.auth.AuthResult;
 import com.google.firebase.auth.FirebaseAuth;
 import com.google.firebase.auth.FirebaseUser;
+import com.google.firebase.auth.UserProfileChangeRequest;
 import com.theartofdev.edmodo.cropper.CropImage;
-import com.yalantis.ucrop.UCrop;
-
-import java.io.File;
 
 import de.hdodenhof.circleimageview.CircleImageView;
 
@@ -51,7 +47,7 @@
         rEmailId = findViewById(R.id.edit_text_emailId);
         rPassword = findViewById(R.id.edit_text_password);
         rName = findViewById(R.id.edit_text_name);
-        profilePicture = findViewById(R.id.profile_image);
+        profilePicture = findViewById(R.id.profile_photo);
 
         profilePicture.setOnClickListener(new SelectImage());
         pfp = null;
@@ -85,14 +81,17 @@
                     @Override
                     public void onComplete(@NonNull Task<AuthResult> task) {
                         if (task.isSuccessful()) {
-                            FirebaseUser user = fAuth.getCurrentUser();
+                            final FirebaseUser user = fAuth.getCurrentUser();
                             user.sendEmailVerification()
                                     .addOnSuccessListener(new OnSuccessListener<Void>() {
                                         @Override
                                         public void onSuccess(Void aVoid) {
                                             Toast.makeText(Register.this, "Verification Message has been sent", Toast.LENGTH_LONG).show();
-
-
+                                            UserProfileChangeRequest profileUpdates = new UserProfileChangeRequest.Builder()
+                                                    .setDisplayName(rName.getText().toString())
+                                                    .setPhotoUri(pfp)
+                                                    .build();
+                                            user.updateProfile(profileUpdates);
                                         }
                                     }
                             ).addOnFailureListener(new OnFailureListener() {
Index: app/src/main/res/layout/activity_register.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".Register\">\r\n\r\n\r\n    <TextView\r\n        android:id=\"@+id/register_text\"\r\n        android:layout_width=\"210dp\"\r\n        android:layout_height=\"50dp\"\r\n        android:text=\"Registeration\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:layout_marginTop=\"50dp\"\r\n        android:textSize=\"30sp\"\r\n        android:textStyle=\"bold\"\r\n        app:layout_constraintVertical_bias=\"0.127\" />\r\n\r\n    <de.hdodenhof.circleimageview.CircleImageView\r\n        android:id=\"@+id/profile_image\"\r\n        android:layout_width=\"150dp\"\r\n        android:layout_height=\"150dp\"\r\n        android:layout_below=\"@id/register_text\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:layout_marginTop=\"50dp\"\r\n        android:src=\"@drawable/user\"\r\n        app:civ_border_color=\"#FF000000\"\r\n        app:civ_border_width=\"2dp\"\r\n        android:layout_marginBottom=\"25dp\"\r\n        />\r\n\r\n\r\n    <EditText\r\n        android:id=\"@+id/edit_text_name\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"60dp\"\r\n        android:ems=\"10\"\r\n        android:layout_margin=\"5dp\"\r\n        android:hint=\"Enter Name\"\r\n        android:inputType=\"textPersonName\"\r\n        android:layout_below=\"@id/profile_image\" />\r\n\r\n\r\n    <EditText\r\n        android:id=\"@+id/edit_text_emailId\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"60dp\"\r\n        android:layout_below=\"@id/edit_text_name\"\r\n        android:ems=\"10\"\r\n        android:layout_margin=\"5dp\"\r\n        android:hint=\"Enter Email ID\"\r\n        android:inputType=\"textEmailAddress\"\r\n        android:textSize=\"19sp\"\r\n        />\r\n\r\n    <EditText\r\n        android:id=\"@+id/edit_text_password\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"60dp\"\r\n        android:ems=\"10\"\r\n        android:layout_margin=\"5dp\"\r\n        android:hint=\"Enter Password\"\r\n        android:inputType=\"textPassword\"\r\n        android:textSize=\"19sp\"\r\n        android:layout_below=\"@id/edit_text_emailId\"/>\r\n\r\n    <Button\r\n        android:id=\"@+id/button_next\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"50dp\"\r\n        android:layout_centerHorizontal=\"true\"\r\n        android:text=\"NEXT\"\r\n        android:textSize=\"20sp\"\r\n        android:layout_below=\"@id/edit_text_password\"/>\r\n\r\n</RelativeLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_register.xml	(revision d1059d569a3938914b4b9958b71ba39f20aeb237)
+++ app/src/main/res/layout/activity_register.xml	(date 1605419716001)
@@ -19,7 +19,7 @@
         app:layout_constraintVertical_bias="0.127" />
 
     <de.hdodenhof.circleimageview.CircleImageView
-        android:id="@+id/profile_image"
+        android:id="@+id/profile_photo"
         android:layout_width="150dp"
         android:layout_height="150dp"
         android:layout_below="@id/register_text"
@@ -40,7 +40,7 @@
         android:layout_margin="5dp"
         android:hint="Enter Name"
         android:inputType="textPersonName"
-        android:layout_below="@id/profile_image" />
+        android:layout_below="@id/profile_photo" />
 
 
     <EditText
Index: app/src/main/res/layout/nav_header.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"176dp\"\r\n    android:background=\"@color/colorPrimary\"\r\n    android:gravity=\"bottom\"\r\n    android:orientation=\"vertical\"\r\n    android:padding=\"16dp\"\r\n    android:theme=\"@style/ThemeOverlay.AppCompat.Dark\">\r\n\r\n    <ImageView\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:src=\"@mipmap/ic_launcher_round\" />\r\n    <TextView\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:paddingTop=\"8dp\"\r\n        android:text=\"My Name\"\r\n        android:textAppearance=\"@style/TextAppearance.AppCompat.Body1\" />\r\n    <TextView\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:text=\"myname@notesmaker.com\"/>\r\n\r\n</LinearLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/nav_header.xml	(revision d1059d569a3938914b4b9958b71ba39f20aeb237)
+++ app/src/main/res/layout/nav_header.xml	(date 1605419920056)
@@ -9,18 +9,23 @@
     android:theme="@style/ThemeOverlay.AppCompat.Dark">
 
     <ImageView
+        android:id="@+id/userProfilePhoto"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:src="@mipmap/ic_launcher_round" />
+
     <TextView
+        android:id="@+id/username"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:paddingTop="8dp"
         android:text="My Name"
         android:textAppearance="@style/TextAppearance.AppCompat.Body1" />
+
     <TextView
+        android:id="@+id/userEmail"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
-        android:text="myname@notesmaker.com"/>
+        android:text="myname@notesmaker.com" />
 
 </LinearLayout>
\ No newline at end of file
